machine:
  node:
    version: 6.10.0
  environment:
    PATH: "${PATH}:${HOME}/${CIRCLE_PROJECT_REPONAME}/node_modules/.bin"
  environment:
    AWS_DEFAULT_REGION: eu-west-2
dependencies:
  override:
    - yarn
  cache_directories:
    - "./node_modules"
    - "~/.cache/yarn"
test:
  override:
    - yarn run build
deployment:
  develop:
    branch: feature/styleguidist
    commands:
      - aws s3 sync --acl public-read styleguide s3://$AWS_S3_BUCKET_DEV --cache-control 'public, max-age=600' --delete
